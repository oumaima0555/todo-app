<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Todo App{% endblock %}</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{{ asset('css/index.css') }}">

    {% block stylesheets %}{% endblock %}
</head>

<body class="p-3 {% block body_class %}{% endblock %}">
<div class="container" style="max-width: 800px; background: rgba(255,255,255,0.9); border-radius: 10px; padding: 20px; box-shadow: 0 0 10px rgba(0,0,0,0.1);">

    {% block theme_toggle %}
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>List des taches</h1>
        <button id="theme-toggle" class="btn btn-outline-secondary">
            <i class="bi bi-moon-fill" id="theme-icon"></i>
        </button>
    </div>
    {% endblock %}

    {% block body %}{% endblock %}
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

{% block theme_script %}
<script>
    const themeToggle = document.getElementById('theme-toggle');

    if (themeToggle) {
        const themeIcon = document.getElementById('theme-icon');
        const body = document.body;

        const currentTheme = localStorage.getItem('theme') || 'light';
        body.classList.add(currentTheme + '-theme');

        if (currentTheme === 'dark') {
            themeIcon.classList.replace('bi-moon-fill', 'bi-sun-fill');
        }

        themeToggle.addEventListener('click', () => {
            body.classList.toggle('dark-theme');
            body.classList.toggle('light-theme');

            const isDark = body.classList.contains('dark-theme');
            themeIcon.className = isDark ? 'bi bi-sun-fill' : 'bi bi-moon-fill';
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        });
    }
</script>
{% endblock %}

</body>
</html>
