{# templates/task/check_db.html.twig #}
<!DOCTYPE html>
<html>
<head>
    <title>Check Database</title>
    <style>
        body { padding: 20px; }
        .success { color: green; }
        .error { color: red; }
        .warning { color: orange; }
        table { border-collapse: collapse; margin: 10px 0; }
        th, td { border: 1px solid #ccc; padding: 8px; }
    </style>
</head>
<body>
    <h1>üîç V√©rification Base de Donn√©es</h1>
    
    <h2>Table 'task' :</h2>
    {% if tableExists %}
        <p class="success">‚úÖ Table 'task' existe</p>
        <p>Nombre de t√¢ches : {{ taskCount }}</p>
    {% else %}
        <p class="error">‚ùå Table 'task' n'existe pas</p>
    {% endif %}
    
    {% if tableExists and structure|length > 0 %}
        <h3>Structure de la table :</h3>
        <table>
            <tr>
                <th>Champ</th>
                <th>Type</th>
                <th>Null</th>
                <th>Cl√©</th>
                <th>Default</th>
            </tr>
            {% for column in structure %}
            <tr>
                <td>{{ column.Field }}</td>
                <td>{{ column.Type }}</td>
                <td>{{ column.Null }}</td>
                <td>{{ column.Key }}</td>
                <td>{{ column.Default }}</td>
            </tr>
            {% endfor %}
        </table>
    {% endif %}
    
    {% if allTasks|length > 0 %}
        <h3>T√¢ches pr√©sentes :</h3>
        <ul>
            {% for task in allTasks %}
                <li>#{{ task.id }} - {{ task.title }} ({{ task.createdAt|date('d/m/Y H:i') }})</li>
            {% endfor %}
        </ul>
    {% endif %}
    
    <p>
        <a href="{{ path('task_debug_insert') }}">Test d'insertion</a> |
        <a href="{{ path('task_index') }}">Liste normale</a>
    </p>
</body>
</html>